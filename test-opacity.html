<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Opacity ãƒ†ã‚¹ãƒˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }

        h1 {
            font-size: 18px;
            margin-bottom: 20px;
            color: #333;
        }

        .test {
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .test h2 {
            font-size: 14px;
            margin-bottom: 10px;
            color: #007AFF;
            font-weight: 600;
        }

        .test p {
            font-size: 13px;
            color: #666;
            margin-bottom: 12px;
        }

        /* å…±é€šã®textareaãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« */
        .test-textarea {
            width: 100%;
            height: 100px;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #007AFF;
            border-radius: 8px;
            resize: none;
            -webkit-user-select: text;
            user-select: text;
            -webkit-touch-callout: default;
        }

        /* opacity: 0 */
        #test1 {
            opacity: 0;
        }

        /* opacity: 0.01 */
        #test2 {
            opacity: 0.01;
        }

        /* opacity: 0.05 */
        #test3 {
            opacity: 0.05;
        }

        /* opacity: 0.1 */
        #test4 {
            opacity: 0.1;
        }

        /* é€æ˜textarea + èƒŒæ™¯è‰²ä»˜ãã‚³ãƒ³ãƒ†ãƒŠ */
        #container5 {
            position: relative;
            height: 150px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            overflow: hidden;
        }

        #test5 {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.01;
            font-size: 16px;
            border: none;
            background: transparent;
            color: transparent;
            caret-color: transparent;
            -webkit-user-select: text;
            user-select: text;
            -webkit-touch-callout: default;
            padding: 12px;
        }

        #label5 {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 16px;
            font-weight: 600;
            pointer-events: none;
            text-align: center;
        }

        .status {
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 13px;
            color: #333;
            min-height: 40px;
        }

        .success {
            background: #d4edda;
            color: #155724;
        }

        .info {
            background: #d1ecf1;
            color: #0c5460;
        }

        .note {
            margin-top: 8px;
            padding: 8px 12px;
            background: #fff3cd;
            border-radius: 6px;
            font-size: 12px;
            color: #856404;
        }
    </style>
</head>
<body>
    <h1>ğŸ“± Opacity å€¤ã¨ãƒšãƒ¼ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</h1>

    <!-- ãƒ†ã‚¹ãƒˆ1: opacity: 0 -->
    <div class="test">
        <h2>ãƒ†ã‚¹ãƒˆ1: opacity: 0ï¼ˆå®Œå…¨ã«é€æ˜ï¼‰</h2>
        <p>ã“ã®ã‚¨ãƒªã‚¢ã‚’é•·æŠ¼ã—ã—ã¦ãƒšãƒ¼ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒå‡ºã‚‹ã‹</p>
        <textarea id="test1" class="test-textarea" placeholder="opacity: 0"></textarea>
        <div class="status" id="status1">å¾…æ©Ÿä¸­...</div>
        <div class="note">âš ï¸ iOSã§ã¯ãƒšãƒ¼ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒå‡ºãªã„å¯èƒ½æ€§</div>
    </div>

    <!-- ãƒ†ã‚¹ãƒˆ2: opacity: 0.01 -->
    <div class="test">
        <h2>ãƒ†ã‚¹ãƒˆ2: opacity: 0.01ï¼ˆã»ã¼è¦‹ãˆãªã„ï¼‰</h2>
        <p>ã“ã®ã‚¨ãƒªã‚¢ã‚’é•·æŠ¼ã—ã—ã¦ãƒšãƒ¼ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒå‡ºã‚‹ã‹</p>
        <textarea id="test2" class="test-textarea" placeholder="opacity: 0.01"></textarea>
        <div class="status" id="status2">å¾…æ©Ÿä¸­...</div>
        <div class="note">âœ… æ¨å¥¨å€¤: ç›®ã«ã¯è¦‹ãˆãªã„ãŒiOSã§å‹•ä½œ</div>
    </div>

    <!-- ãƒ†ã‚¹ãƒˆ3: opacity: 0.05 -->
    <div class="test">
        <h2>ãƒ†ã‚¹ãƒˆ3: opacity: 0.05ï¼ˆã‹ã™ã‹ã«è¦‹ãˆã‚‹ï¼‰</h2>
        <p>ã“ã®ã‚¨ãƒªã‚¢ã‚’é•·æŠ¼ã—ã—ã¦ãƒšãƒ¼ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒå‡ºã‚‹ã‹</p>
        <textarea id="test3" class="test-textarea" placeholder="opacity: 0.05"></textarea>
        <div class="status" id="status3">å¾…æ©Ÿä¸­...</div>
        <div class="note">å°‘ã—ã ã‘è¦–èªã§ãã‚‹å¯èƒ½æ€§ã‚ã‚Š</div>
    </div>

    <!-- ãƒ†ã‚¹ãƒˆ4: opacity: 0.1 -->
    <div class="test">
        <h2>ãƒ†ã‚¹ãƒˆ4: opacity: 0.1ï¼ˆã†ã£ã™ã‚‰è¦‹ãˆã‚‹ï¼‰</h2>
        <p>ã“ã®ã‚¨ãƒªã‚¢ã‚’é•·æŠ¼ã—ã—ã¦ãƒšãƒ¼ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒå‡ºã‚‹ã‹</p>
        <textarea id="test4" class="test-textarea" placeholder="opacity: 0.1"></textarea>
        <div class="status" id="status4">å¾…æ©Ÿä¸­...</div>
        <div class="note">è¦–èªã§ãã‚‹ãƒ¬ãƒ™ãƒ«</div>
    </div>

    <!-- ãƒ†ã‚¹ãƒˆ5: ã‚¢ãƒ—ãƒªå®Ÿè£…æ–¹å¼ï¼ˆopacity: 0.01 + èƒŒæ™¯è‰²ï¼‰ -->
    <div class="test">
        <h2>ãƒ†ã‚¹ãƒˆ5: ã‚¢ãƒ—ãƒªå®Ÿè£…æ–¹å¼</h2>
        <p>opacity: 0.01 + transparent background + èƒŒæ™¯ã‚³ãƒ³ãƒ†ãƒŠ</p>
        <div id="container5">
            <textarea id="test5"></textarea>
            <div id="label5">ã“ã®ã‚¨ãƒªã‚¢ã‚’é•·æŠ¼ã—<br>ï¼ˆã‚¢ãƒ—ãƒªã¨åŒã˜å®Ÿè£…ï¼‰</div>
        </div>
        <div class="status" id="status5">å¾…æ©Ÿä¸­...</div>
        <div class="note">âœ… å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã¨åŒã˜è¨­å®š</div>
    </div>

    <script>
        console.log('Opacity Test Loaded');
        console.log('User Agent:', navigator.userAgent);

        // å„ãƒ†ã‚¹ãƒˆã®è¨­å®š
        const tests = [
            { id: 'test1', status: 'status1', opacity: 0 },
            { id: 'test2', status: 'status2', opacity: 0.01 },
            { id: 'test3', status: 'status3', opacity: 0.05 },
            { id: 'test4', status: 'status4', opacity: 0.1 },
            { id: 'test5', status: 'status5', opacity: 0.01 }
        ];

        tests.forEach(test => {
            const textarea = document.getElementById(test.id);
            const status = document.getElementById(test.status);

            // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆ
            textarea.addEventListener('focus', () => {
                status.textContent = `ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ä¸­ (opacity: ${test.opacity}) - é•·æŠ¼ã—ã—ã¦ãã ã•ã„`;
                status.className = 'status info';
                console.log(`${test.id}: focused`);
            });

            // ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆ
            textarea.addEventListener('touchstart', (e) => {
                console.log(`${test.id}: touchstart`);
            });

            // é•·æŠ¼ã—ãƒ¡ãƒ‹ãƒ¥ãƒ¼
            textarea.addEventListener('contextmenu', (e) => {
                console.log(`${test.id}: contextmenu - ãƒšãƒ¼ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºï¼`);
                status.textContent = `âœ… é•·æŠ¼ã—ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºæˆåŠŸ (opacity: ${test.opacity})`;
                status.className = 'status success';
            });

            // ãƒšãƒ¼ã‚¹ãƒˆã‚¤ãƒ™ãƒ³ãƒˆ
            textarea.addEventListener('paste', (e) => {
                console.log(`${test.id}: paste event!`, e);
                e.preventDefault();

                const clipboardData = e.clipboardData || window.clipboardData;
                const items = clipboardData.items;

                let result = `âœ… ãƒšãƒ¼ã‚¹ãƒˆæˆåŠŸï¼ (opacity: ${test.opacity}) - `;
                let hasImage = false;

                if (items) {
                    for (let i = 0; i < items.length; i++) {
                        console.log(`${test.id} Item type:`, items[i].type);
                        if (items[i].type.indexOf('image') !== -1) {
                            hasImage = true;
                            result += 'ç”»åƒã‚’æ¤œå‡º';
                        }
                    }
                }

                if (!hasImage) {
                    result += 'ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¤œå‡º';
                }

                status.textContent = result;
                status.className = 'status success';
            });
        });

        // ãƒ†ã‚¹ãƒˆ5ã«è‡ªå‹•ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
        setTimeout(() => {
            document.getElementById('test5').focus();
            console.log('Test5: auto-focused');
        }, 100);
    </script>
</body>
</html>
