<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>iOS ãƒšãƒ¼ã‚¹ãƒˆè¶…ã‚·ãƒ³ãƒ—ãƒ«ãƒ†ã‚¹ãƒˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }

        h1 {
            font-size: 18px;
            margin-bottom: 20px;
            color: #333;
        }

        .test {
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .test h2 {
            font-size: 14px;
            margin-bottom: 10px;
            color: #007AFF;
            font-weight: 600;
        }

        .test p {
            font-size: 13px;
            color: #666;
            margin-bottom: 12px;
        }

        /* ãƒ†ã‚¹ãƒˆ1: å®Œå…¨ã«æ™®é€šã®textarea */
        #test1 {
            width: 100%;
            height: 100px;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #007AFF;
            border-radius: 8px;
            resize: none;
        }

        /* ãƒ†ã‚¹ãƒˆ2: å¤§ããªé€æ˜textarea */
        #container2 {
            position: relative;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            overflow: hidden;
        }

        #test2 {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            font-size: 16px;
        }

        #label2 {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 16px;
            font-weight: 600;
            pointer-events: none;
            text-align: center;
        }

        /* ãƒ†ã‚¹ãƒˆ3: Safariã«æœ€é©åŒ– */
        #test3 {
            width: 100%;
            height: 100px;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #34C759;
            border-radius: 8px;
            resize: none;
            -webkit-user-select: text;
            user-select: text;
            -webkit-touch-callout: default;
        }

        .status {
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 13px;
            color: #333;
            min-height: 40px;
        }

        .success {
            background: #d4edda;
            color: #155724;
        }

        .info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <h1>ğŸ“± iOS ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>

    <!-- ãƒ†ã‚¹ãƒˆ1: å®Œå…¨ã«æ¨™æº–ã®textarea -->
    <div class="test">
        <h2>ãƒ†ã‚¹ãƒˆ1: æ¨™æº–textarea</h2>
        <p>ã“ã®textareaã‚’é•·æŠ¼ã—ã—ã¦ã€ãƒšãƒ¼ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèª</p>
        <textarea id="test1" placeholder="ã“ã“ã‚’é•·æŠ¼ã—ã—ã¦ãƒšãƒ¼ã‚¹ãƒˆ"></textarea>
        <div class="status" id="status1">å¾…æ©Ÿä¸­...</div>
    </div>

    <!-- ãƒ†ã‚¹ãƒˆ2: é€æ˜ãªtextareaï¼ˆã‚¢ãƒ—ãƒªæ–¹å¼ï¼‰ -->
    <div class="test">
        <h2>ãƒ†ã‚¹ãƒˆ2: é€æ˜textareaï¼ˆã‚¢ãƒ—ãƒªæ–¹å¼ï¼‰</h2>
        <p>ã“ã®ç´«ã®ã‚¨ãƒªã‚¢ã‚’é•·æŠ¼ã—ã—ã¦ã€ãƒšãƒ¼ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèª</p>
        <div id="container2">
            <textarea id="test2"></textarea>
            <div id="label2">ã“ã®ã‚¨ãƒªã‚¢ã‚’é•·æŠ¼ã—</div>
        </div>
        <div class="status" id="status2">å¾…æ©Ÿä¸­...</div>
    </div>

    <!-- ãƒ†ã‚¹ãƒˆ3: Safariæœ€é©åŒ–textarea -->
    <div class="test">
        <h2>ãƒ†ã‚¹ãƒˆ3: Safariæœ€é©åŒ–</h2>
        <p>user-selectã¨touch-calloutã‚’æ˜ç¤ºçš„ã«è¨­å®šã—ãŸtextarea</p>
        <textarea id="test3" placeholder="ã“ã“ã‚’é•·æŠ¼ã—ã—ã¦ãƒšãƒ¼ã‚¹ãƒˆ"></textarea>
        <div class="status" id="status3">å¾…æ©Ÿä¸­...</div>
    </div>

    <script>
        console.log('iOS Paste Test Loaded');
        console.log('User Agent:', navigator.userAgent);

        // ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±è¡¨ç¤º
        const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
        console.log('Is iOS:', isIOS);

        // ãƒ†ã‚¹ãƒˆ1
        const test1 = document.getElementById('test1');
        const status1 = document.getElementById('status1');

        test1.addEventListener('focus', () => {
            status1.textContent = 'ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ä¸­ - é•·æŠ¼ã—ã—ã¦ãã ã•ã„';
            status1.className = 'status info';
            console.log('Test1: focused');
        });

        test1.addEventListener('touchstart', () => {
            console.log('Test1: touchstart');
        });

        test1.addEventListener('contextmenu', (e) => {
            console.log('Test1: contextmenu');
        });

        test1.addEventListener('paste', (e) => {
            console.log('Test1: paste event!', e);
            e.preventDefault();

            const clipboardData = e.clipboardData || window.clipboardData;
            const items = clipboardData.items;

            let result = 'ãƒšãƒ¼ã‚¹ãƒˆã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ï¼ ';
            let hasImage = false;

            if (items) {
                for (let i = 0; i < items.length; i++) {
                    console.log('Item type:', items[i].type);
                    if (items[i].type.indexOf('image') !== -1) {
                        hasImage = true;
                        result += 'ç”»åƒã‚’æ¤œå‡ºã—ã¾ã—ãŸ';
                    }
                }
            }

            if (!hasImage) {
                result += 'ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¤œå‡ºã—ã¾ã—ãŸ';
            }

            status1.textContent = 'âœ… ' + result;
            status1.className = 'status success';
        });

        // ãƒ†ã‚¹ãƒˆ2
        const test2 = document.getElementById('test2');
        const status2 = document.getElementById('status2');

        // è‡ªå‹•ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
        setTimeout(() => {
            test2.focus();
            console.log('Test2: auto-focused');
        }, 100);

        test2.addEventListener('focus', () => {
            status2.textContent = 'ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ä¸­ - é•·æŠ¼ã—ã—ã¦ãã ã•ã„';
            status2.className = 'status info';
            console.log('Test2: focused');
        });

        test2.addEventListener('touchstart', (e) => {
            console.log('Test2: touchstart', e.touches[0]);
        });

        test2.addEventListener('contextmenu', (e) => {
            console.log('Test2: contextmenu');
        });

        test2.addEventListener('paste', (e) => {
            console.log('Test2: paste event!', e);
            e.preventDefault();

            const clipboardData = e.clipboardData || window.clipboardData;
            const items = clipboardData.items;

            let result = 'ãƒšãƒ¼ã‚¹ãƒˆã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ï¼ ';
            let hasImage = false;

            if (items) {
                for (let i = 0; i < items.length; i++) {
                    console.log('Item type:', items[i].type);
                    if (items[i].type.indexOf('image') !== -1) {
                        hasImage = true;
                        result += 'ç”»åƒã‚’æ¤œå‡ºã—ã¾ã—ãŸ';
                    }
                }
            }

            if (!hasImage) {
                result += 'ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¤œå‡ºã—ã¾ã—ãŸ';
            }

            status2.textContent = 'âœ… ' + result;
            status2.className = 'status success';
        });

        // ãƒ†ã‚¹ãƒˆ3
        const test3 = document.getElementById('test3');
        const status3 = document.getElementById('status3');

        test3.addEventListener('focus', () => {
            status3.textContent = 'ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ä¸­ - é•·æŠ¼ã—ã—ã¦ãã ã•ã„';
            status3.className = 'status info';
            console.log('Test3: focused');
        });

        test3.addEventListener('touchstart', () => {
            console.log('Test3: touchstart');
        });

        test3.addEventListener('contextmenu', (e) => {
            console.log('Test3: contextmenu');
        });

        test3.addEventListener('paste', (e) => {
            console.log('Test3: paste event!', e);
            e.preventDefault();

            const clipboardData = e.clipboardData || window.clipboardData;
            const items = clipboardData.items;

            let result = 'ãƒšãƒ¼ã‚¹ãƒˆã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ï¼ ';
            let hasImage = false;

            if (items) {
                for (let i = 0; i < items.length; i++) {
                    console.log('Item type:', items[i].type);
                    if (items[i].type.indexOf('image') !== -1) {
                        hasImage = true;
                        result += 'ç”»åƒã‚’æ¤œå‡ºã—ã¾ã—ãŸ';
                    }
                }
            }

            if (!hasImage) {
                result += 'ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¤œå‡ºã—ã¾ã—ãŸ';
            }

            status3.textContent = 'âœ… ' + result;
            status3.className = 'status success';
        });
    </script>
</body>
</html>
