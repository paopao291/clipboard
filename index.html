<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <title>シール帳 - 画像コレクション</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <!-- SVGフィルタ定義：シンプルな縁取り -->
        <svg style="position: absolute; width: 0; height: 0">
            <defs>
                <filter id="outline-filter" color-interpolation-filters="sRGB">
                    <feMorphology
                        operator="dilate"
                        radius="12"
                        in="SourceAlpha"
                        result="dilated"
                    />
                    <feFlood flood-color="white" result="white" />
                    <feComposite
                        in="white"
                        in2="dilated"
                        operator="in"
                        result="outline"
                    />
                    <feMerge>
                        <feMergeNode in="outline" />
                        <feMergeNode in="SourceGraphic" />
                    </feMerge>
                </filter>
            </defs>
        </svg>

        <div id="app">
            <!-- 隠しファイル入力 -->
            <input
                type="file"
                id="galleryInput"
                accept="image/*"
                style="display: none"
                multiple
            />
            <input
                type="file"
                id="cameraInput"
                accept="image/*"
                capture="environment"
                style="display: none"
            />

            <!-- メインキャンバスエリア（全画面） -->
            <div id="canvas" class="canvas">
                <!-- スマホ用：長押しペーストエリア -->
                <textarea
                    id="pasteArea"
                    class="paste-area"
                    inputmode="none"
                ></textarea>

                <!-- ゴミ箱ボタン -->
                <button id="trashBtn" class="trash-btn" title="削除">
                    <svg
                        class="trash-icon"
                        width="22"
                        height="22"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M3 6H21M19 6V20C19 21 18 22 17 22H7C6 22 5 21 5 20V6M8 6V4C8 3 9 2 10 2H14C15 2 16 3 16 4V6"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                        <path
                            d="M10 11V17M14 11V17"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                    </svg>
                    <div class="trash-tooltip">ドラッグして削除</div>
                </button>

                <!-- FAB（追加ボタン） -->
                <button id="addBtn" class="add-btn" title="画像を追加">
                    <svg
                        width="28"
                        height="28"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M12 5V19M5 12H19"
                            stroke="currentColor"
                            stroke-width="2.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                    </svg>
                </button>

                <!-- インフォボタン -->
                <button id="infoBtn" class="info-btn" title="操作方法">
                    <svg
                        width="22"
                        height="22"
                        viewBox="0 0 22 22"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <circle
                            cx="11"
                            cy="11"
                            r="10"
                            stroke="currentColor"
                            stroke-width="1.5"
                        />
                        <path
                            d="M11 15.5V10.5M11 7V6.5"
                            stroke="currentColor"
                            stroke-width="2.5"
                            stroke-linecap="round"
                        />
                    </svg>
                </button>

                <!-- ヘルプモーダル -->
                <div id="helpModal" class="help-modal">
                    <div class="help-content">
                        <button id="closeHelp" class="close-help">✕</button>
                        <h2>操作方法</h2>

                        <div class="help-section desktop-hint">
                            <h3>画像を追加</h3>
                            <p>
                                画像をコピーして <kbd>Ctrl+V</kbd> /
                                <kbd>Cmd+V</kbd>
                            </p>

                            <h3>移動</h3>
                            <p>画像をドラッグ</p>

                            <h3>拡大縮小</h3>
                            <p>画像の上でマウスホイールをスクロール</p>

                            <h3>回転</h3>
                            <p><kbd>Shift</kbd> を押しながらドラッグ</p>

                            <h3>削除</h3>
                            <p>画像をドラッグして画面下のゴミ箱へ</p>

                            <h3>画像として保存</h3>
                            <p>スクリーンショットを撮影してください</p>
                        </div>

                        <div class="help-section mobile-hint">
                            <h3>画像を追加</h3>
                            <p>画像をコピーして画面を長押し→「ペースト」</p>

                            <h3>移動</h3>
                            <p>1本指でドラッグ</p>

                            <h3>拡大縮小・回転</h3>
                            <p>2本指でピンチ</p>

                            <h3>削除</h3>
                            <p>画像をドラッグして画面下のゴミ箱へ</p>

                            <h3>画像として保存</h3>
                            <p>スクリーンショットを撮影してください</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script type="module" src="src/main.js"></script>
    </body>
</html>
